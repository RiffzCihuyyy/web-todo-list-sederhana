<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskMaster - Sistem Manajemen Tugas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        body {
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* Dark Mode Styles */
        .dark {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #312e81 100%);
            color: #f1f5f9;
        }
        
        .dark .bg-gradient-to-br.from-blue-50.to-indigo-100 {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #312e81 100%);
        }
        
        .dark .glass-effect {
            backdrop-filter: blur(20px);
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .dark .bg-white {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        
        .dark .text-gray-800 {
            color: #f1f5f9;
        }
        
        .dark .text-gray-700 {
            color: #e2e8f0;
        }
        
        .dark .text-gray-600 {
            color: #cbd5e1;
        }
        
        .dark .text-gray-500 {
            color: #94a3b8;
        }
        
        .dark .border-gray-200 {
            border-color: #475569;
        }
        
        .dark .border-gray-100 {
            border-color: #334155;
        }
        
        .dark .bg-gray-50 {
            background: linear-gradient(135deg, #475569 0%, #64748b 100%);
        }
        
        .dark .bg-gray-100 {
            background: linear-gradient(135deg, #475569 0%, #64748b 100%);
        }
        
        .dark .hover\\:bg-gray-50:hover {
            background: linear-gradient(135deg, #475569 0%, #64748b 100%);
        }
        
        .dark .hover\\:bg-gray-200:hover {
            background: linear-gradient(135deg, #64748b 0%, #78716c 100%);
        }
        
        .dark .divide-gray-200 > :not([hidden]) ~ :not([hidden]) {
            border-color: #475569;
        }
        
        .dark .bg-gradient-to-br.from-white.to-blue-50 {
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #3730a3 100%);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        
        .dark .input-field {
            background: linear-gradient(135deg, #334155 0%, #475569 100%);
            border-color: #64748b;
            color: #f1f5f9;
        }
        
        .dark .input-field:focus {
            border-color: #60a5fa;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.2);
        }
        
        .dark .shadow-xl {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(148, 163, 184, 0.1);
        }
        
        .dark .shadow-lg {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }
        
        .dark .shadow-sm {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.2), 0 1px 2px 0 rgba(0, 0, 0, 0.1);
        }
        
        .dark .border-2.border-red-200 {
            border-color: #ef4444;
            background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%);
        }
        
        .dark .bg-red-100 {
            background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%);
        }
        
        .dark .text-red-600 {
            color: #fca5a5;
        }
        
        .dark .bg-yellow-100 {
            background: linear-gradient(135deg, #78350f 0%, #92400e 100%);
        }
        
        .dark .text-yellow-700 {
            color: #fcd34d;
        }
        
        .dark .bg-green-100 {
            background: linear-gradient(135deg, #14532d 0%, #166534 100%);
        }
        
        .dark .text-green-700 {
            color: #86efac;
        }
        
        .dark .text-red-700 {
            color: #fca5a5;
        }
        
        .dark .text-green-800 {
            color: #86efac;
        }
        
        .dark .text-red-800 {
            color: #fca5a5;
        }
        
        .dark .text-yellow-800 {
            color: #fcd34d;
        }
        
        .dark .bg-purple-100 {
            background: linear-gradient(135deg, #581c87 0%, #6b21a8 100%);
        }
        
        .dark .text-purple-800 {
            color: #d8b4fe;
        }
        
        .dark .bg-blue-100 {
            background: linear-gradient(135deg, #1e3a8a 0%, #1d4ed8 100%);
        }
        
        .dark .text-blue-800 {
            color: #93c5fd;
        }
        
        .dark .hover\\:bg-blue-50:hover {
            background: linear-gradient(135deg, #1e3a8a 0%, #1d4ed8 100%);
        }
        
        .dark .hover\\:bg-red-50:hover {
            background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%);
        }
        
        .dark .text-blue-600 {
            color: #93c5fd;
        }
        
        .dark .hover\\:text-blue-800:hover {
            color: #bfdbfe;
        }
        
        .dark .text-red-600 {
            color: #fca5a5;
        }
        
        .dark .hover\\:text-red-800:hover {
            color: #fecaca;
        }
        
        /* Dark Mode Stats Cards */
        .dark .bg-gradient-to-br.from-blue-500.to-blue-600 {
            background: linear-gradient(135deg, #1e40af 0%, #3730a3 100%);
            box-shadow: 0 10px 25px rgba(30, 64, 175, 0.3);
        }
        
        .dark .bg-gradient-to-br.from-green-500.to-green-600 {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            box-shadow: 0 10px 25px rgba(5, 150, 105, 0.3);
        }
        
        .dark .bg-gradient-to-br.from-orange-500.to-red-500 {
            background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%);
            box-shadow: 0 10px 25px rgba(234, 88, 12, 0.3);
        }
        
        /* Dark Mode Header */
        .dark .bg-gradient-to-r.from-blue-600.via-purple-600.to-indigo-700 {
            background: linear-gradient(135deg, #1e40af 0%, #7c3aed 50%, #4338ca 100%);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        /* Dark Mode Navigation */
        .dark .tab-btn.bg-blue-500 {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }
        
        /* Dark Mode Form Buttons */
        .dark .bg-gradient-to-r.from-blue-600.to-purple-600 {
            background: linear-gradient(135deg, #2563eb 0%, #9333ea 100%);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }
        
        .dark .bg-gradient-to-r.from-blue-600.to-purple-600:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #7c3aed 100%);
            box-shadow: 0 12px 35px rgba(37, 99, 235, 0.5);
        }
        
        /* Dark Mode Priority Borders */
        .dark .priority-tinggi { 
            border-left: 4px solid #ef4444; 
            background: linear-gradient(135deg, rgba(127, 29, 29, 0.1) 0%, rgba(153, 27, 27, 0.1) 100%);
        }
        .dark .priority-sedang { 
            border-left: 4px solid #f59e0b; 
            background: linear-gradient(135deg, rgba(120, 53, 15, 0.1) 0%, rgba(146, 64, 14, 0.1) 100%);
        }
        .dark .priority-rendah { 
            border-left: 4px solid #10b981; 
            background: linear-gradient(135deg, rgba(20, 83, 45, 0.1) 0%, rgba(22, 101, 52, 0.1) 100%);
        }
        
        /* Dark Mode Floating Shapes */
        .dark .shape {
            background: linear-gradient(45deg, rgba(59, 130, 246, 0.15), rgba(147, 51, 234, 0.15));
        }
        
        /* Dark Mode Table */
        .dark .bg-gray-50 {
            background: linear-gradient(135deg, #334155 0%, #475569 100%);
        }
        
        /* Dark Mode Buttons */
        .dark .bg-blue-600 {
            background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
        }
        
        .dark .bg-blue-600:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
        }
        
        .dark .bg-green-600 {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }
        
        .dark .bg-green-600:hover {
            background: linear-gradient(135deg, #047857 0%, #059669 100%);
        }
        
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .mobile-hidden {
                display: none !important;
            }
            
            .mobile-full {
                width: 100% !important;
            }
            
            .mobile-text-sm {
                font-size: 0.875rem !important;
            }
            
            .mobile-p-4 {
                padding: 1rem !important;
            }
            
            .mobile-p-6 {
                padding: 1.5rem !important;
            }
            
            .mobile-grid-1 {
                grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
            }
            
            .mobile-space-y-4 > * + * {
                margin-top: 1rem !important;
            }
            
            .mobile-flex-col {
                flex-direction: column !important;
            }
            
            .mobile-items-start {
                align-items: flex-start !important;
            }
            
            .mobile-space-x-0 > * + * {
                margin-left: 0 !important;
            }
            
            .mobile-space-y-2 > * + * {
                margin-top: 0.5rem !important;
            }
            
            .mobile-text-center {
                text-align: center !important;
            }
            
            .mobile-mb-4 {
                margin-bottom: 1rem !important;
            }
            
            .mobile-overflow-x-auto {
                overflow-x: auto !important;
            }
            
            .mobile-min-w-full {
                min-width: 100% !important;
            }
            
            /* Mobile Navigation */
            .mobile-nav-scroll {
                overflow-x: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            .mobile-nav-scroll::-webkit-scrollbar {
                display: none;
            }
            
            /* Mobile Cards */
            .mobile-card-stack {
                margin-bottom: 1rem;
            }
            
            /* Mobile Form */
            .mobile-form-stack > * {
                margin-bottom: 1rem;
            }
            
            /* Mobile Stats */
            .mobile-stats-grid {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            /* Mobile Header */
            .mobile-header-stack {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .mobile-header-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            /* Mobile Task Cards */
            .mobile-task-card {
                padding: 1rem;
                margin-bottom: 1rem;
            }
            
            .mobile-task-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .mobile-task-actions {
                width: 100%;
                justify-content: flex-end;
            }
            
            /* Mobile Table */
            .mobile-table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .mobile-table {
                min-width: 600px;
            }
        }
        
        /* Dark Mode Transition Animation */
        .theme-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }
        
        .theme-ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            opacity: 0;
            transition: none;
        }
        
        .theme-ripple.light-to-dark {
            background: radial-gradient(circle, 
                rgba(15, 23, 42, 0.95) 0%, 
                rgba(30, 27, 75, 0.9) 30%, 
                rgba(49, 46, 129, 0.8) 60%, 
                transparent 100%);
        }
        
        .theme-ripple.dark-to-light {
            background: radial-gradient(circle, 
                rgba(248, 250, 252, 0.95) 0%, 
                rgba(241, 245, 249, 0.9) 30%, 
                rgba(226, 232, 240, 0.8) 60%, 
                transparent 100%);
        }
        
        .theme-ripple.animate {
            animation: rippleExpand 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        @keyframes rippleExpand {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            70% {
                opacity: 0.8;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }
        
        /* Smooth transitions for all elements */
        * {
            transition: background-color 0.3s ease, 
                       color 0.3s ease, 
                       border-color 0.3s ease, 
                       box-shadow 0.3s ease !important;
        }
        
        /* Override for elements that shouldn't have transitions */
        .theme-ripple,
        .theme-transition,
        input[type="range"],
        input[type="checkbox"] {
            transition: none !important;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .priority-tinggi { border-left: 4px solid #ef4444; }
        .priority-sedang { border-left: 4px solid #f59e0b; }
        .priority-rendah { border-left: 4px solid #10b981; }
        
        /* Login Page Animations */
        .login-container {
            animation: slideInUp 0.8s ease-out;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }
        
        .shape {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));
            animation: float 6s ease-in-out infinite;
        }
        
        .shape:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .shape:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 20%;
            right: 10%;
            animation-delay: 2s;
        }
        
        .shape:nth-child(3) {
            width: 60px;
            height: 60px;
            bottom: 20%;
            left: 20%;
            animation-delay: 4s;
        }
        
        .shape:nth-child(4) {
            width: 100px;
            height: 100px;
            bottom: 10%;
            right: 20%;
            animation-delay: 1s;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
            }
        }
        
        .login-form-container {
            position: relative;
            z-index: 10;
        }
        
        .input-group {
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .input-field {
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
        }
        
        .input-field:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            transform: translateY(-2px);
        }
        
        .login-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }
        
        .login-btn:active {
            transform: translateY(0);
        }
        
        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .login-btn:hover::before {
            left: 100%;
        }
        
        .logo-animation {
            animation: logoFloat 3s ease-in-out infinite;
        }
        
        @keyframes logoFloat {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        .demo-card {
            animation: slideInLeft 0.8s ease-out 0.3s both;
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .register-floating {
            animation: floatingRegister 4s ease-in-out infinite;
        }
        
        @keyframes floatingRegister {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            25% {
                transform: translateY(-8px) rotate(0.5deg);
            }
            50% {
                transform: translateY(-5px) rotate(0deg);
            }
            75% {
                transform: translateY(-12px) rotate(-0.5deg);
            }
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Login Page -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center p-4 relative">
        <!-- Floating Background Shapes -->
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
        
        <div class="login-form-container">
            <div class="glass-effect rounded-3xl shadow-2xl p-8 w-full max-w-md login-container register-floating">
                <!-- Logo and Title -->
                <div class="text-center mb-8">
                    <div class="logo-animation mb-4">
                        <div class="w-16 h-16 mx-auto bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                            </svg>
                        </div>
                    </div>
                    <h1 class="text-4xl font-bold gradient-text mb-2">TaskMaster</h1>
                    <p class="text-gray-600 font-medium">Sistem Manajemen Tugas Modern</p>
                    <div class="w-20 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto mt-3 rounded-full"></div>
                </div>
                
                <form id="loginForm" class="space-y-6">
                    <div class="input-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            Username
                        </label>
                        <input type="text" id="username" class="input-field w-full px-4 py-3 rounded-xl focus:outline-none" placeholder="Masukkan username Anda" required>
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                            Password
                        </label>
                        <input type="password" id="password" class="input-field w-full px-4 py-3 rounded-xl focus:outline-none" placeholder="Masukkan password Anda" required>
                    </div>
                    
                    <button type="submit" class="login-btn w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-xl font-semibold text-lg shadow-lg">
                        <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                        </svg>
                        Masuk ke Dashboard
                    </button>
                </form>
                
                <!-- Register Link -->
                <div class="text-center mt-6">
                    <p class="text-sm text-gray-600">
                        Belum punya akun? 
                        <button id="showRegisterBtn" class="text-blue-600 hover:text-blue-800 font-semibold transition-colors duration-200">
                            Daftar di sini
                        </button>
                    </p>
                </div>
                
                <!-- Footer -->
                <div class="text-center mt-6">
                    <p class="text-xs text-gray-500">
                        Â© 2024 TaskMaster. Kelola tugas dengan mudah dan efisien.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="min-h-screen flex items-center justify-center p-4 relative hidden">
        <!-- Floating Background Shapes -->
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
        
        <div class="login-form-container">
            <div class="glass-effect rounded-3xl shadow-2xl p-8 w-full max-w-md login-container register-floating">
                <!-- Logo and Title -->
                <div class="text-center mb-8">
                    <div class="logo-animation mb-4">
                        <div class="w-16 h-16 mx-auto bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path>
                            </svg>
                        </div>
                    </div>
                    <h1 class="text-4xl font-bold gradient-text mb-2">Daftar Akun</h1>
                    <p class="text-gray-600 font-medium">Buat akun TaskMaster baru</p>
                    <div class="w-20 h-1 bg-gradient-to-r from-green-500 to-blue-600 mx-auto mt-3 rounded-full"></div>
                </div>
                
                <form id="registerForm" class="space-y-6">
                    <div class="input-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            Nama Lengkap
                        </label>
                        <input type="text" id="regFullName" class="input-field w-full px-4 py-3 rounded-xl focus:outline-none" placeholder="Masukkan nama lengkap Anda" required>
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            Username
                        </label>
                        <input type="text" id="regUsername" class="input-field w-full px-4 py-3 rounded-xl focus:outline-none" placeholder="Pilih username unik" required>
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                            Password
                        </label>
                        <input type="password" id="regPassword" class="input-field w-full px-4 py-3 rounded-xl focus:outline-none" placeholder="Buat password yang kuat" required>
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Konfirmasi Password
                        </label>
                        <input type="password" id="regConfirmPassword" class="input-field w-full px-4 py-3 rounded-xl focus:outline-none" placeholder="Ulangi password Anda" required>
                    </div>
                    
                    <button type="submit" class="login-btn w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 rounded-xl font-semibold text-lg shadow-lg">
                        <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path>
                        </svg>
                        Daftar Sekarang
                    </button>
                </form>
                
                <!-- Login Link -->
                <div class="text-center mt-6">
                    <p class="text-sm text-gray-600">
                        Sudah punya akun? 
                        <button id="showLoginBtn" class="text-blue-600 hover:text-blue-800 font-semibold transition-colors duration-200">
                            Masuk di sini
                        </button>
                    </p>
                </div>
                
                <!-- Footer -->
                <div class="text-center mt-6">
                    <p class="text-xs text-gray-500">
                        Â© 2024 TaskMaster. Kelola tugas dengan mudah dan efisien.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="hidden">
        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 shadow-xl">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4 md:py-6 mobile-header-stack">
                    <div class="flex items-center mobile-full">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 md:w-10 md:h-10 bg-white bg-opacity-20 rounded-xl flex items-center justify-center backdrop-blur-sm">
                                <svg class="w-4 h-4 md:w-6 md:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                                </svg>
                            </div>
                            <div>
                                <h1 class="text-xl md:text-2xl font-bold text-white">TaskMaster</h1>
                                <p class="text-blue-100 text-xs md:text-sm mobile-hidden">Dashboard Manajemen</p>
                            </div>
                        </div>
                        <span id="userRole" class="ml-3 md:ml-6 px-2 md:px-4 py-1 md:py-2 bg-white bg-opacity-20 text-white rounded-full text-xs md:text-sm font-medium backdrop-blur-sm border border-white border-opacity-30"></span>
                    </div>
                    <div class="flex items-center space-x-2 md:space-x-4 mobile-header-actions">
                        <div class="flex items-center space-x-2 md:space-x-3">
                            <!-- Dark Mode Toggle -->
                            <div class="flex items-center space-x-1 md:space-x-2 mobile-hidden">
                                <svg class="w-3 h-3 md:w-4 md:h-4 text-yellow-300" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path>
                                </svg>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="darkModeToggle" class="sr-only peer">
                                    <div class="w-9 h-5 md:w-11 md:h-6 bg-white bg-opacity-20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-gray-800"></div>
                                </label>
                                <svg class="w-3 h-3 md:w-4 md:h-4 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                                </svg>
                            </div>
                            <div class="text-right mobile-hidden">
                                <span id="welcomeUser" class="text-white font-medium block text-sm md:text-base"></span>
                                <span class="text-blue-100 text-xs md:text-sm" id="currentTime"></span>
                            </div>
                            <div id="headerAvatar" class="w-8 h-8 md:w-10 md:h-10 bg-gradient-to-br from-white to-blue-100 rounded-full flex items-center justify-center shadow-lg border-2 border-white border-opacity-30 overflow-hidden">
                                <svg class="w-4 h-4 md:w-6 md:h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                        </div>
                        <button id="logoutBtn" class="bg-white bg-opacity-20 text-white px-2 md:px-4 py-1 md:py-2 rounded-xl hover:bg-opacity-30 transition duration-300 backdrop-blur-sm border border-white border-opacity-30 flex items-center space-x-1 md:space-x-2">
                            <svg class="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                            </svg>
                            <span class="text-xs md:text-sm">Keluar</span>
                        </button>
                    </div>
                </div>
                
                <!-- Mobile User Info -->
                <div class="md:hidden pb-4 border-t border-white border-opacity-20 pt-4 mt-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <span id="welcomeUserMobile" class="text-white font-medium block text-sm"></span>
                            <span class="text-blue-100 text-xs" id="currentTimeMobile"></span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <svg class="w-3 h-3 text-yellow-300" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path>
                            </svg>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="darkModeToggleMobile" class="sr-only peer">
                                <div class="w-9 h-5 bg-white bg-opacity-20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-gray-800"></div>
                            </label>
                            <svg class="w-3 h-3 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Stats Cards -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4 md:mt-8 relative z-10">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4 mb-4 md:mb-6 mobile-stats-grid" id="statsCards">
                <!-- Stats will be populated here -->
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4 md:mt-6">
            <div class="bg-white rounded-2xl shadow-lg p-1 md:p-2">
                <nav class="flex space-x-1 md:space-x-2 mobile-nav-scroll">
                    <button id="tasksTab" class="tab-btn flex-1 flex items-center justify-center space-x-1 md:space-x-2 py-2 md:py-3 px-2 md:px-4 rounded-xl bg-blue-500 text-white font-medium transition-all duration-300 text-xs md:text-sm whitespace-nowrap">
                        <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                        </svg>
                        <span class="hidden sm:inline">Manajemen Tugas</span>
                        <span class="sm:hidden">Tugas</span>
                    </button>
                    <button id="reportsTab" class="tab-btn flex-1 flex items-center justify-center space-x-1 md:space-x-2 py-2 md:py-3 px-2 md:px-4 rounded-xl text-gray-500 hover:text-gray-700 hover:bg-gray-50 font-medium transition-all duration-300 text-xs md:text-sm whitespace-nowrap">
                        <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        <span class="hidden sm:inline">Laporan Tugas</span>
                        <span class="sm:hidden">Laporan</span>
                    </button>
                    <button id="profileTab" class="tab-btn flex-1 flex items-center justify-center space-x-1 md:space-x-2 py-2 md:py-3 px-2 md:px-4 rounded-xl text-gray-500 hover:text-gray-700 hover:bg-gray-50 font-medium transition-all duration-300 text-xs md:text-sm whitespace-nowrap">
                        <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <span class="hidden sm:inline">Profil Saya</span>
                        <span class="sm:hidden">Profil</span>
                    </button>
                    <button id="usersTab" class="tab-btn flex-1 flex items-center justify-center space-x-1 md:space-x-2 py-2 md:py-3 px-2 md:px-4 rounded-xl text-gray-500 hover:text-gray-700 hover:bg-gray-50 font-medium transition-all duration-300 text-xs md:text-sm whitespace-nowrap hidden">
                        <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                        </svg>
                        <span class="hidden sm:inline">Manajemen User</span>
                        <span class="sm:hidden">User</span>
                    </button>
                </nav>
            </div>
        </div>

        <!-- Tasks Management Tab -->
        <div id="tasksContent" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4 md:mt-8">
            <!-- Add Task Form -->
            <div class="bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-xl p-4 md:p-8 mb-4 md:mb-8 border border-blue-100 mobile-card-stack">
                <div class="flex items-center mb-4 md:mb-6 mobile-task-header">
                    <div class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mr-3 md:mr-4">
                        <svg class="w-5 h-5 md:w-6 md:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-xl md:text-2xl font-bold text-gray-800">Tambah Tugas Baru</h2>
                        <p class="text-gray-600 text-sm md:text-base mobile-hidden">Buat tugas baru untuk mengelola aktivitas Anda</p>
                    </div>
                </div>
                
                <form id="taskForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mobile-grid-1 mobile-form-stack">
                    <div class="form-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2 md:mb-3 flex items-center">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                            </svg>
                            Judul Tugas
                        </label>
                        <input type="text" id="taskTitle" class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm text-sm md:text-base" placeholder="Masukkan judul tugas..." required>
                    </div>
                    
                    <div class="form-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2 md:mb-3 flex items-center">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                            Mata Pelajaran
                        </label>
                        <input type="text" id="taskSubject" class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm text-sm md:text-base" placeholder="Contoh: Matematika" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2 md:mb-3 flex items-center">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0v-1h8v1z"></path>
                            </svg>
                            Tanggal Target
                        </label>
                        <input type="date" id="taskDate" class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm text-sm md:text-base" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2 md:mb-3 flex items-center">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-2 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Prioritas
                        </label>
                        <select id="taskPriority" class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm text-sm md:text-base" required>
                            <option value="">Pilih Prioritas</option>
                            <option value="tinggi">ðŸ”´ Tinggi</option>
                            <option value="sedang">ðŸŸ¡ Sedang</option>
                            <option value="rendah">ðŸŸ¢ Rendah</option>
                        </select>
                    </div>
                    
                    <div class="md:col-span-2 lg:col-span-2 form-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2 md:mb-3 flex items-center">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Deskripsi
                        </label>
                        <textarea id="taskDescription" rows="3" class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm resize-none text-sm md:text-base" placeholder="Jelaskan detail tugas yang akan dikerjakan..." required></textarea>
                    </div>
                    
                    <div class="flex items-end lg:col-span-1">
                        <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 md:py-3 px-4 md:px-6 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center space-x-2 text-sm md:text-base">
                            <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <span id="submitBtnText">Tambah Tugas</span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Tasks List -->
            <div class="bg-white rounded-2xl shadow-xl p-4 md:p-8 border border-gray-100">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-6 mobile-task-header">
                    <div class="flex items-center mb-4 md:mb-0">
                        <div class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center mr-3 md:mr-4">
                            <svg class="w-5 h-5 md:w-6 md:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                            </svg>
                        </div>
                        <div>
                            <h2 class="text-xl md:text-2xl font-bold text-gray-800">Daftar Tugas</h2>
                            <p class="text-gray-600 text-sm md:text-base mobile-hidden">Kelola dan pantau progress tugas Anda</p>
                        </div>
                    </div>
                    <div class="flex space-x-1 md:space-x-2 mobile-nav-scroll">
                        <button id="filterAll" class="px-3 md:px-4 py-1 md:py-2 bg-blue-100 text-blue-700 rounded-lg font-medium hover:bg-blue-200 transition-colors duration-200 text-xs md:text-sm whitespace-nowrap">Semua</button>
                        <button id="filterPending" class="px-3 md:px-4 py-1 md:py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-xs md:text-sm whitespace-nowrap">Pending</button>
                        <button id="filterCompleted" class="px-3 md:px-4 py-1 md:py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-xs md:text-sm whitespace-nowrap">Selesai</button>
                    </div>
                </div>
                <div id="tasksList" class="space-y-3 md:space-y-4">
                    <!-- Tasks will be populated here -->
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reportsContent" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4 md:mt-8 hidden">
            <div class="bg-white rounded-xl shadow-sm p-4 md:p-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 md:mb-6 mobile-task-header">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 md:mb-0">Laporan Tugas</h2>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 md:space-x-4 w-full md:w-auto">
                        <select id="sortBy" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm md:text-base">
                            <option value="date">Urutkan berdasarkan Tanggal</option>
                            <option value="priority">Urutkan berdasarkan Prioritas</option>
                            <option value="subject">Urutkan berdasarkan Mapel</option>
                        </select>
                        <button id="exportBtn" class="bg-green-600 text-white px-3 md:px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200 text-sm md:text-base whitespace-nowrap">
                            Export Excel
                        </button>
                    </div>
                </div>
                
                <div class="overflow-x-auto mobile-table-container">
                    <table class="min-w-full divide-y divide-gray-200 mobile-table">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Judul</th>
                                <th class="px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mapel</th>
                                <th class="px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tanggal</th>
                                <th class="px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Prioritas</th>
                                <th class="px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            </tr>
                        </thead>
                        <tbody id="reportsTable" class="bg-white divide-y divide-gray-200">
                            <!-- Reports will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="profileContent" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4 md:mt-8 hidden">
            <!-- Profile Header -->
            <div class="bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-xl p-4 md:p-8 mb-4 md:mb-8 border border-blue-100">
                <div class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6">
                    <!-- Profile Avatar -->
                    <div class="relative">
                        <div id="profileAvatar" class="w-24 h-24 md:w-32 md:h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg overflow-hidden">
                            <svg class="w-12 h-12 md:w-16 md:h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <div class="absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full border-4 border-white flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- Profile Info -->
                    <div class="flex-1 text-center md:text-left">
                        <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-1" id="profileFullName"></h1>
                        <p class="text-lg text-gray-600 mb-2">@<span id="profileUsername"></span></p>
                        <div class="flex flex-col sm:flex-row items-center justify-center md:justify-start space-y-2 sm:space-y-0 sm:space-x-4 mb-4">
                            <span class="px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full text-sm font-medium" id="profileRole"></span>
                            <span class="text-gray-600 text-sm flex items-center">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0v-1h8v1z"></path>
                                </svg>
                                Bergabung sejak <span id="joinDate"></span>
                            </span>
                        </div>
                        <p class="text-gray-600 max-w-md">
                            Selamat datang di TaskMaster! Kelola tugas Anda dengan mudah dan tingkatkan produktivitas setiap hari.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Profile Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm">Total Tugas</p>
                            <p class="text-2xl font-bold text-gray-800" id="profileTotalTasks">0</p>
                        </div>
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm">Selesai</p>
                            <p class="text-2xl font-bold text-green-600" id="profileCompletedTasks">0</p>
                        </div>
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm">Pending</p>
                            <p class="text-2xl font-bold text-orange-600" id="profilePendingTasks">0</p>
                        </div>
                        <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm">Tingkat Selesai</p>
                            <p class="text-2xl font-bold text-purple-600" id="profileCompletionRate">0%</p>
                        </div>
                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Settings -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Edit Profile -->
                <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Edit Profil</h3>
                            <p class="text-gray-600 text-sm">Perbarui informasi akun Anda</p>
                        </div>
                    </div>
                    
                    <form id="profileForm" class="space-y-4">
                        <!-- Profile Photo Upload -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                Foto Profil
                            </label>
                            <div class="flex items-center space-x-4">
                                <div id="previewAvatar" class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center overflow-hidden">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <input type="file" id="profilePhotoInput" accept="image/*" class="hidden">
                                    <button type="button" onclick="document.getElementById('profilePhotoInput').click()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 text-sm">
                                        Pilih Foto
                                    </button>
                                    <button type="button" id="removePhotoBtn" class="ml-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors duration-200 text-sm hidden">
                                        Hapus Foto
                                    </button>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Format: JPG, PNG, GIF. Maksimal 2MB.</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                Nama Lengkap
                            </label>
                            <input type="text" id="editFullName" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm" placeholder="Masukkan nama lengkap Anda" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                </svg>
                                Username
                            </label>
                            <input type="text" id="editUsername" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm" placeholder="Username unik Anda" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                                Password Baru
                            </label>
                            <input type="password" id="editPassword" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm" placeholder="Kosongkan jika tidak ingin mengubah">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Konfirmasi Password
                            </label>
                            <input type="password" id="editConfirmPassword" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white shadow-sm" placeholder="Konfirmasi password baru">
                        </div>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                            <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Simpan Perubahan
                        </button>
                    </form>
                </div>

                <!-- Activity Summary -->
                <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Ringkasan Aktivitas</h3>
                            <p class="text-gray-600 text-sm">Statistik tugas berdasarkan mata pelajaran</p>
                        </div>
                    </div>
                    
                    <div id="subjectStats" class="space-y-3">
                        <!-- Subject statistics will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 mt-6">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center mr-3">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800">Aktivitas Terbaru</h3>
                        <p class="text-gray-600 text-sm">Tugas yang baru saja Anda selesaikan</p>
                    </div>
                </div>
                
                <div id="recentActivity" class="space-y-3">
                    <!-- Recent activity will be populated here -->
                </div>
            </div>
        </div>

        <!-- Users Management Tab (Admin Only) -->
        <div id="usersContent" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4 md:mt-8 hidden">
            <!-- Add User Form -->
            <div class="bg-white rounded-xl shadow-sm p-4 md:p-6 mb-4 md:mb-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Tambah User Baru</h2>
                <form id="userForm" class="grid grid-cols-1 md:grid-cols-3 gap-4 mobile-grid-1 mobile-form-stack">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                        <input type="text" id="newUsername" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm md:text-base" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="newPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm md:text-base" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                        <select id="newRole" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm md:text-base" required>
                            <option value="">Pilih Role</option>
                            <option value="admin">Admin</option>
                            <option value="user">User</option>
                        </select>
                    </div>
                    
                    <div class="flex items-end md:col-span-1">
                        <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200 text-sm md:text-base">
                            <span id="userSubmitBtnText">Tambah User</span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Users List -->
            <div class="bg-white rounded-xl shadow-sm p-4 md:p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Daftar User</h2>
                <div class="overflow-x-auto mobile-table-container">
                    <table class="min-w-full divide-y divide-gray-200 mobile-table">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
                                <th class="px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                                <th class="px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable" class="bg-white divide-y divide-gray-200">
                            <!-- Users will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Storage
        let currentUser = null;
        let editingTaskId = null;
        let editingUserId = null;
        
        // Initialize default data
        let users = [
            { id: 1, username: 'admin', password: 'admin123', role: 'admin', fullName: 'Administrator', profilePhoto: null },
            { id: 2, username: 'user', password: 'user123', role: 'user', fullName: 'Pengguna Demo', profilePhoto: null }
        ];
        
        let tasks = [
            {
                id: 1,
                title: 'Tugas Matematika Bab 5',
                subject: 'Matematika',
                description: 'Mengerjakan soal-soal integral dan diferensial',
                date: '2024-01-15',
                priority: 'tinggi',
                completed: false,
                userId: 2
            },
            {
                id: 2,
                title: 'Essay Bahasa Indonesia',
                subject: 'Bahasa Indonesia',
                description: 'Menulis essay tentang kebudayaan Indonesia',
                date: '2024-01-20',
                priority: 'sedang',
                completed: true,
                userId: 2
            }
        ];

        // DOM Elements
        const loginPage = document.getElementById('loginPage');
        const registerPage = document.getElementById('registerPage');
        const dashboard = document.getElementById('dashboard');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const welcomeUser = document.getElementById('welcomeUser');
        const userRole = document.getElementById('userRole');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const showRegisterBtn = document.getElementById('showRegisterBtn');
        const showLoginBtn = document.getElementById('showLoginBtn');

        // Tab elements
        const tasksTab = document.getElementById('tasksTab');
        const reportsTab = document.getElementById('reportsTab');
        const profileTab = document.getElementById('profileTab');
        const usersTab = document.getElementById('usersTab');
        const tasksContent = document.getElementById('tasksContent');
        const reportsContent = document.getElementById('reportsContent');
        const profileContent = document.getElementById('profileContent');
        const usersContent = document.getElementById('usersContent');

        // Form elements
        const taskForm = document.getElementById('taskForm');
        const userForm = document.getElementById('userForm');
        const profileForm = document.getElementById('profileForm');
        const exportBtn = document.getElementById('exportBtn');
        const sortBy = document.getElementById('sortBy');

        // Login functionality
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                showDashboard();
            } else {
                alert('Username atau password salah!');
            }
        });

        // Register functionality
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const fullName = document.getElementById('regFullName').value.trim();
            const username = document.getElementById('regUsername').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            
            // Validation
            if (!fullName) {
                alert('Nama lengkap harus diisi!');
                return;
            }
            
            if (!username) {
                alert('Username harus diisi!');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Password dan konfirmasi password tidak cocok!');
                return;
            }
            
            if (password.length < 6) {
                alert('Password harus minimal 6 karakter!');
                return;
            }
            
            if (users.some(u => u.username === username)) {
                alert('Username sudah digunakan! Pilih username lain.');
                return;
            }
            
            // Create new user
            const newUser = {
                id: Date.now(),
                fullName: fullName,
                username: username,
                password: password,
                role: 'user',
                profilePhoto: null
            };
            
            users.push(newUser);
            alert('Akun berhasil dibuat! Silakan login dengan akun baru Anda.');
            
            // Clear form and switch to login
            registerForm.reset();
            showLogin();
        });

        // Navigation between login and register
        showRegisterBtn.addEventListener('click', function() {
            loginPage.classList.add('hidden');
            registerPage.classList.remove('hidden');
        });

        showLoginBtn.addEventListener('click', function() {
            registerPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        });

        function showLogin() {
            registerPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        }

        // Logout functionality
        logoutBtn.addEventListener('click', function() {
            currentUser = null;
            editingTaskId = null;
            editingUserId = null;
            dashboard.classList.add('hidden');
            registerPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
            loginForm.reset();
            registerForm.reset();
        });

        // Show dashboard
        function showDashboard() {
            loginPage.classList.add('hidden');
            dashboard.classList.remove('hidden');
            
            const displayName = currentUser.fullName || currentUser.username;
            welcomeUser.textContent = `Selamat datang, ${displayName}`;
            const welcomeUserMobile = document.getElementById('welcomeUserMobile');
            if (welcomeUserMobile) {
                welcomeUserMobile.textContent = `Selamat datang, ${displayName}`;
            }
            userRole.textContent = currentUser.role.toUpperCase();
            
            // Update header avatar
            updateHeaderAvatar();
            
            if (currentUser.role === 'admin') {
                usersTab.classList.remove('hidden');
            } else {
                usersTab.classList.add('hidden');
            }
            
            showTab('tasks');
            renderTasks();
            renderReports();
            renderUsers();
            renderProfile();
            renderStats();
            updateTime();
            
            // Update time every minute
            setInterval(updateTime, 60000);
        }

        function updateHeaderAvatar() {
            const headerAvatar = document.getElementById('headerAvatar');
            if (currentUser.profilePhoto) {
                headerAvatar.innerHTML = `<img src="${currentUser.profilePhoto}" alt="Profile" class="w-full h-full object-cover">`;
            } else {
                headerAvatar.innerHTML = `
                    <svg class="w-4 h-4 md:w-6 md:h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                `;
            }
        }

        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('id-ID', { 
                hour: '2-digit', 
                minute: '2-digit',
                day: 'numeric',
                month: 'short'
            });
            const timeElement = document.getElementById('currentTime');
            const timeElementMobile = document.getElementById('currentTimeMobile');
            if (timeElement) {
                timeElement.textContent = timeString;
            }
            if (timeElementMobile) {
                timeElementMobile.textContent = timeString;
            }
        }

        // Render statistics cards
        function renderStats() {
            const statsCards = document.getElementById('statsCards');
            const userTasks = currentUser.role === 'admin' ? tasks : tasks.filter(t => t.userId === currentUser.id);
            
            const totalTasks = userTasks.length;
            const completedTasks = userTasks.filter(t => t.completed).length;
            const pendingTasks = totalTasks - completedTasks;
            const highPriorityTasks = userTasks.filter(t => t.priority === 'tinggi' && !t.completed).length;
            
            statsCards.innerHTML = `
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white shadow-md transform hover:scale-105 transition-all duration-300">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100 text-xs font-medium">Total Tugas</p>
                            <p class="text-2xl font-bold">${totalTasks}</p>
                        </div>
                        <div class="w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white shadow-md transform hover:scale-105 transition-all duration-300">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100 text-xs font-medium">Tugas Selesai</p>
                            <p class="text-2xl font-bold">${completedTasks}</p>
                        </div>
                        <div class="w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-orange-500 to-red-500 rounded-xl p-4 text-white shadow-md transform hover:scale-105 transition-all duration-300">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-orange-100 text-xs font-medium">Prioritas Tinggi</p>
                            <p class="text-2xl font-bold">${highPriorityTasks}</p>
                        </div>
                        <div class="w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            `;
        }

        // Tab functionality
        function showTab(tab) {
            // Reset all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-blue-500', 'text-white');
                btn.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
            });
            
            // Hide all content
            tasksContent.classList.add('hidden');
            reportsContent.classList.add('hidden');
            profileContent.classList.add('hidden');
            usersContent.classList.add('hidden');
            
            // Show selected tab
            if (tab === 'tasks') {
                tasksTab.classList.add('bg-blue-500', 'text-white');
                tasksTab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
                tasksContent.classList.remove('hidden');
            } else if (tab === 'reports') {
                reportsTab.classList.add('bg-blue-500', 'text-white');
                reportsTab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
                reportsContent.classList.remove('hidden');
            } else if (tab === 'profile') {
                profileTab.classList.add('bg-blue-500', 'text-white');
                profileTab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
                profileContent.classList.remove('hidden');
            } else if (tab === 'users') {
                usersTab.classList.add('bg-blue-500', 'text-white');
                usersTab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
                usersContent.classList.remove('hidden');
            }
        }

        tasksTab.addEventListener('click', () => showTab('tasks'));
        reportsTab.addEventListener('click', () => showTab('reports'));
        profileTab.addEventListener('click', () => showTab('profile'));
        usersTab.addEventListener('click', () => showTab('users'));

        // Task filtering
        let currentFilter = 'all';

        // Filter button event listeners
        document.getElementById('filterAll').addEventListener('click', function() {
            setActiveFilter('all', this);
            renderTasks();
        });

        document.getElementById('filterPending').addEventListener('click', function() {
            setActiveFilter('pending', this);
            renderTasks();
        });

        document.getElementById('filterCompleted').addEventListener('click', function() {
            setActiveFilter('completed', this);
            renderTasks();
        });

        function setActiveFilter(filter, buttonElement) {
            currentFilter = filter;
            
            // Reset all filter buttons
            document.querySelectorAll('#filterAll, #filterPending, #filterCompleted').forEach(btn => {
                btn.classList.remove('bg-blue-100', 'text-blue-700');
                btn.classList.add('bg-gray-100', 'text-gray-700');
            });
            
            // Set active button
            buttonElement.classList.remove('bg-gray-100', 'text-gray-700');
            buttonElement.classList.add('bg-blue-100', 'text-blue-700');
        }

        // Task management
        taskForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const taskData = {
                title: document.getElementById('taskTitle').value,
                subject: document.getElementById('taskSubject').value,
                description: document.getElementById('taskDescription').value,
                date: document.getElementById('taskDate').value,
                priority: document.getElementById('taskPriority').value,
                completed: false,
                userId: currentUser.id
            };
            
            if (editingTaskId) {
                // Update existing task
                const taskIndex = tasks.findIndex(t => t.id === editingTaskId);
                tasks[taskIndex] = { ...tasks[taskIndex], ...taskData };
                editingTaskId = null;
                document.getElementById('submitBtnText').textContent = 'Tambah Tugas';
            } else {
                // Add new task
                taskData.id = Date.now();
                tasks.push(taskData);
            }
            
            taskForm.reset();
            renderTasks();
            renderReports();
            renderStats();
        });

        function renderTasks() {
            const tasksList = document.getElementById('tasksList');
            let userTasks = currentUser.role === 'admin' ? tasks : tasks.filter(t => t.userId === currentUser.id);
            
            // Apply current filter
            if (currentFilter === 'pending') {
                userTasks = userTasks.filter(t => !t.completed);
            } else if (currentFilter === 'completed') {
                userTasks = userTasks.filter(t => t.completed);
            }
            // 'all' shows all tasks, no additional filtering needed
            
            if (userTasks.length === 0) {
                let emptyMessage = '';
                let emptyDescription = '';
                
                if (currentFilter === 'pending') {
                    emptyMessage = 'Tidak ada tugas yang belum selesai';
                    emptyDescription = 'Semua tugas sudah diselesaikan! ðŸŽ‰';
                } else if (currentFilter === 'completed') {
                    emptyMessage = 'Belum ada tugas yang selesai';
                    emptyDescription = 'Mulai menyelesaikan tugas untuk melihat progress Anda';
                } else {
                    emptyMessage = 'Belum ada tugas';
                    emptyDescription = 'Mulai dengan menambahkan tugas pertama Anda di atas';
                }
                
                tasksList.innerHTML = `
                    <div class="text-center py-12">
                        <div class="w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center">
                            <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">${emptyMessage}</h3>
                        <p class="text-gray-500">${emptyDescription}</p>
                    </div>
                `;
                return;
            }
            
            tasksList.innerHTML = userTasks.map(task => {
                const isOverdue = new Date(task.date) < new Date() && !task.completed;
                return `
                    <div class="bg-white border-2 ${isOverdue ? 'border-red-200' : 'border-gray-100'} rounded-2xl p-4 md:p-6 priority-${task.priority} fade-in shadow-sm hover:shadow-lg transition-all duration-300 ${task.completed ? 'opacity-75' : ''} mobile-task-card">
                        <div class="flex flex-col md:flex-row md:justify-between md:items-start mb-4 mobile-task-header">
                            <div class="flex-1">
                                <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-3 mb-2">
                                    <h3 class="font-bold text-lg md:text-xl text-gray-800 ${task.completed ? 'line-through' : ''} mb-2 sm:mb-0">${task.title}</h3>
                                    ${isOverdue ? '<span class="px-2 py-1 bg-red-100 text-red-600 text-xs font-medium rounded-full self-start">Terlambat</span>' : ''}
                                </div>
                                <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-sm text-gray-600 mb-3 space-y-2 sm:space-y-0">
                                    <span class="flex items-center">
                                        <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                        </svg>
                                        ${task.subject}
                                    </span>
                                    <span class="flex items-center">
                                        <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0v-1h8v1z"></path>
                                        </svg>
                                        ${new Date(task.date).toLocaleDateString('id-ID')}
                                    </span>
                                    <span class="flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                                        task.priority === 'tinggi' ? 'bg-red-100 text-red-700' :
                                        task.priority === 'sedang' ? 'bg-yellow-100 text-yellow-700' :
                                        'bg-green-100 text-green-700'
                                    }">
                                        ${task.priority === 'tinggi' ? 'ðŸ”´' : task.priority === 'sedang' ? 'ðŸŸ¡' : 'ðŸŸ¢'} 
                                        ${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}
                                    </span>
                                </div>
                                <p class="text-gray-600 text-sm md:text-base ${task.completed ? 'line-through' : ''} mb-4 md:mb-0">${task.description}</p>
                            </div>
                            <div class="flex space-x-2 md:ml-4 mobile-task-actions">
                                <button onclick="editTask(${task.id})" class="p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors duration-200">
                                    <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                    </svg>
                                </button>
                                <button onclick="deleteTask(${task.id})" class="p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors duration-200">
                                    <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button onclick="toggleTaskStatus(${task.id})" class="px-3 md:px-4 py-2 rounded-xl font-medium transition-all duration-200 text-sm md:text-base ${
                                task.completed 
                                    ? 'bg-green-100 text-green-800 hover:bg-green-200' 
                                    : 'bg-gray-100 text-gray-800 hover:bg-gray-200'
                            }">
                                ${task.completed ? 'âœ… Selesai' : 'â³ Tandai Selesai'}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function editTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                document.getElementById('taskTitle').value = task.title;
                document.getElementById('taskSubject').value = task.subject;
                document.getElementById('taskDescription').value = task.description;
                document.getElementById('taskDate').value = task.date;
                document.getElementById('taskPriority').value = task.priority;
                
                editingTaskId = id;
                document.getElementById('submitBtnText').textContent = 'Update Tugas';
            }
        }

        function deleteTask(id) {
            if (confirm('Apakah Anda yakin ingin menghapus tugas ini?')) {
                tasks = tasks.filter(t => t.id !== id);
                renderTasks();
                renderReports();
                renderStats();
            }
        }

        function toggleTaskStatus(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                renderTasks();
                renderReports();
                renderStats();
            }
        }

        // Reports functionality
        function renderReports() {
            const reportsTable = document.getElementById('reportsTable');
            let userTasks = currentUser.role === 'admin' ? tasks : tasks.filter(t => t.userId === currentUser.id);
            
            // Sort tasks based on selected option
            const sortOption = sortBy.value;
            userTasks.sort((a, b) => {
                if (sortOption === 'date') {
                    return new Date(a.date) - new Date(b.date);
                } else if (sortOption === 'priority') {
                    const priorityOrder = { 'tinggi': 3, 'sedang': 2, 'rendah': 1 };
                    return priorityOrder[b.priority] - priorityOrder[a.priority];
                } else if (sortOption === 'subject') {
                    return a.subject.localeCompare(b.subject);
                }
                return 0;
            });
            
            reportsTable.innerHTML = userTasks.map(task => `
                <tr>
                    <td class="px-3 md:px-6 py-2 md:py-4 whitespace-nowrap text-xs md:text-sm font-medium text-gray-900">${task.title}</td>
                    <td class="px-3 md:px-6 py-2 md:py-4 whitespace-nowrap text-xs md:text-sm text-gray-500">${task.subject}</td>
                    <td class="px-3 md:px-6 py-2 md:py-4 whitespace-nowrap text-xs md:text-sm text-gray-500">${new Date(task.date).toLocaleDateString('id-ID')}</td>
                    <td class="px-3 md:px-6 py-2 md:py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                            task.priority === 'tinggi' ? 'bg-red-100 text-red-800' :
                            task.priority === 'sedang' ? 'bg-yellow-100 text-yellow-800' :
                            'bg-green-100 text-green-800'
                        }">
                            ${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}
                        </span>
                    </td>
                    <td class="px-3 md:px-6 py-2 md:py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                            task.completed ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                        }">
                            ${task.completed ? 'Selesai' : 'Belum Selesai'}
                        </span>
                    </td>
                </tr>
            `).join('');
        }

        sortBy.addEventListener('change', renderReports);

        // Export to Excel functionality
        exportBtn.addEventListener('click', function() {
            let userTasks = currentUser.role === 'admin' ? tasks : tasks.filter(t => t.userId === currentUser.id);
            
            const exportData = userTasks.map(task => ({
                'Judul': task.title,
                'Mata Pelajaran': task.subject,
                'Deskripsi': task.description,
                'Tanggal Target': new Date(task.date).toLocaleDateString('id-ID'),
                'Prioritas': task.priority.charAt(0).toUpperCase() + task.priority.slice(1),
                'Status': task.completed ? 'Selesai' : 'Belum Selesai'
            }));
            
            const ws = XLSX.utils.json_to_sheet(exportData);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Laporan Tugas');
            
            const fileName = `laporan_tugas_${new Date().toISOString().split('T')[0]}.xlsx`;
            XLSX.writeFile(wb, fileName);
        });

        // User management (Admin only)
        userForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const userData = {
                username: document.getElementById('newUsername').value,
                password: document.getElementById('newPassword').value,
                role: document.getElementById('newRole').value
            };
            
            // Check if username already exists
            if (users.some(u => u.username === userData.username && (!editingUserId || u.id !== editingUserId))) {
                alert('Username sudah digunakan!');
                return;
            }
            
            if (editingUserId) {
                // Update existing user
                const userIndex = users.findIndex(u => u.id === editingUserId);
                users[userIndex] = { ...users[userIndex], ...userData };
                editingUserId = null;
                document.getElementById('userSubmitBtnText').textContent = 'Tambah User';
            } else {
                // Add new user
                userData.id = Date.now();
                users.push(userData);
            }
            
            userForm.reset();
            renderUsers();
        });

        function renderUsers() {
            if (currentUser?.role !== 'admin') return;
            
            const usersTable = document.getElementById('usersTable');
            usersTable.innerHTML = users.map(user => `
                <tr>
                    <td class="px-3 md:px-6 py-2 md:py-4 whitespace-nowrap text-xs md:text-sm font-medium text-gray-900">${user.username}</td>
                    <td class="px-3 md:px-6 py-2 md:py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                            user.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'
                        }">
                            ${user.role.charAt(0).toUpperCase() + user.role.slice(1)}
                        </span>
                    </td>
                    <td class="px-3 md:px-6 py-2 md:py-4 whitespace-nowrap text-xs md:text-sm font-medium">
                        <button onclick="editUser(${user.id})" class="text-blue-600 hover:text-blue-900 mr-2 md:mr-3">Edit</button>
                        <button onclick="deleteUser(${user.id})" class="text-red-600 hover:text-red-900">Hapus</button>
                    </td>
                </tr>
            `).join('');
        }

        function editUser(id) {
            const user = users.find(u => u.id === id);
            if (user) {
                document.getElementById('newUsername').value = user.username;
                document.getElementById('newPassword').value = user.password;
                document.getElementById('newRole').value = user.role;
                
                editingUserId = id;
                document.getElementById('userSubmitBtnText').textContent = 'Update User';
            }
        }

        function deleteUser(id) {
            if (id === currentUser.id) {
                alert('Anda tidak dapat menghapus akun sendiri!');
                return;
            }
            
            if (confirm('Apakah Anda yakin ingin menghapus user ini?')) {
                users = users.filter(u => u.id !== id);
                // Also delete tasks belonging to this user
                tasks = tasks.filter(t => t.userId !== id);
                renderUsers();
                renderTasks();
                renderReports();
            }
        }

        // Dark Mode functionality
        function initDarkMode() {
            // Check for saved dark mode preference or default to light mode
            const savedTheme = localStorage.getItem('darkMode');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'true' || (!savedTheme && prefersDark)) {
                document.documentElement.classList.add('dark');
                darkModeToggle.checked = true;
                const darkModeToggleMobile = document.getElementById('darkModeToggleMobile');
                if (darkModeToggleMobile) {
                    darkModeToggleMobile.checked = true;
                }
            }
        }

        function toggleDarkMode(event) {
            // Get the position of the dark mode toggle button
            const toggleButton = darkModeToggle.parentElement;
            const rect = toggleButton.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            // Create transition overlay
            const transitionOverlay = document.createElement('div');
            transitionOverlay.className = 'theme-transition';
            document.body.appendChild(transitionOverlay);
            
            // Create ripple effect
            const ripple = document.createElement('div');
            const isDarkMode = document.documentElement.classList.contains('dark');
            
            ripple.className = `theme-ripple ${isDarkMode ? 'dark-to-light' : 'light-to-dark'}`;
            
            // Calculate the maximum distance to cover the entire screen
            const maxDistance = Math.sqrt(
                Math.pow(Math.max(centerX, window.innerWidth - centerX), 2) +
                Math.pow(Math.max(centerY, window.innerHeight - centerY), 2)
            );
            
            // Set ripple size and position
            const rippleSize = maxDistance * 2;
            ripple.style.width = rippleSize + 'px';
            ripple.style.height = rippleSize + 'px';
            ripple.style.left = (centerX - rippleSize / 2) + 'px';
            ripple.style.top = (centerY - rippleSize / 2) + 'px';
            
            transitionOverlay.appendChild(ripple);
            
            // Start the animation
            requestAnimationFrame(() => {
                ripple.classList.add('animate');
            });
            
            // Toggle dark mode after a short delay to sync with animation
            setTimeout(() => {
                const isDark = document.documentElement.classList.toggle('dark');
                localStorage.setItem('darkMode', isDark);
                darkModeToggle.checked = isDark;
            }, 100);
            
            // Clean up after animation completes
            setTimeout(() => {
                if (transitionOverlay && transitionOverlay.parentNode) {
                    transitionOverlay.parentNode.removeChild(transitionOverlay);
                }
            }, 900);
        }

        // Dark mode toggle event listeners
        darkModeToggle.addEventListener('change', toggleDarkMode);
        
        // Mobile dark mode toggle
        const darkModeToggleMobile = document.getElementById('darkModeToggleMobile');
        if (darkModeToggleMobile) {
            darkModeToggleMobile.addEventListener('change', function(event) {
                // Sync with desktop toggle
                darkModeToggle.checked = this.checked;
                toggleDarkMode(event);
            });
        }

        // Profile functionality
        function renderProfile() {
            const userTasks = tasks.filter(t => t.userId === currentUser.id);
            const completedTasks = userTasks.filter(t => t.completed);
            const pendingTasks = userTasks.filter(t => !t.completed);
            const completionRate = userTasks.length > 0 ? Math.round((completedTasks.length / userTasks.length) * 100) : 0;
            
            // Update profile info
            document.getElementById('profileFullName').textContent = currentUser.fullName || currentUser.username;
            document.getElementById('profileUsername').textContent = currentUser.username;
            document.getElementById('profileRole').textContent = currentUser.role.toUpperCase();
            document.getElementById('joinDate').textContent = 'Januari 2024'; // Default join date
            
            // Update profile avatar
            updateProfileAvatar();
            
            // Update profile stats
            document.getElementById('profileTotalTasks').textContent = userTasks.length;
            document.getElementById('profileCompletedTasks').textContent = completedTasks.length;
            document.getElementById('profilePendingTasks').textContent = pendingTasks.length;
            document.getElementById('profileCompletionRate').textContent = completionRate + '%';
            
            // Update form with current user data
            document.getElementById('editFullName').value = currentUser.fullName || '';
            document.getElementById('editUsername').value = currentUser.username;
            
            // Update preview avatar
            updatePreviewAvatar();
            
            // Render subject statistics
            renderSubjectStats(userTasks);
            
            // Render recent activity
            renderRecentActivity(completedTasks);
        }

        function updateProfileAvatar() {
            const profileAvatar = document.getElementById('profileAvatar');
            if (currentUser.profilePhoto) {
                profileAvatar.innerHTML = `<img src="${currentUser.profilePhoto}" alt="Profile Photo" class="w-full h-full object-cover">`;
            } else {
                profileAvatar.innerHTML = `
                    <svg class="w-12 h-12 md:w-16 md:h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                `;
            }
        }

        function updatePreviewAvatar() {
            const previewAvatar = document.getElementById('previewAvatar');
            const removePhotoBtn = document.getElementById('removePhotoBtn');
            
            if (currentUser.profilePhoto) {
                previewAvatar.innerHTML = `<img src="${currentUser.profilePhoto}" alt="Preview" class="w-full h-full object-cover">`;
                removePhotoBtn.classList.remove('hidden');
            } else {
                previewAvatar.innerHTML = `
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                `;
                removePhotoBtn.classList.add('hidden');
            }
        }

        // Profile photo upload functionality
        document.getElementById('profilePhotoInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                // Validate file size (2MB max)
                if (file.size > 2 * 1024 * 1024) {
                    alert('Ukuran file terlalu besar! Maksimal 2MB.');
                    return;
                }
                
                // Validate file type
                if (!file.type.startsWith('image/')) {
                    alert('File harus berupa gambar!');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageData = e.target.result;
                    
                    // Update preview
                    const previewAvatar = document.getElementById('previewAvatar');
                    previewAvatar.innerHTML = `<img src="${imageData}" alt="Preview" class="w-full h-full object-cover">`;
                    
                    // Show remove button
                    document.getElementById('removePhotoBtn').classList.remove('hidden');
                    
                    // Store temporarily (will be saved when form is submitted)
                    previewAvatar.dataset.newPhoto = imageData;
                };
                reader.readAsDataURL(file);
            }
        });

        // Remove photo functionality
        document.getElementById('removePhotoBtn').addEventListener('click', function() {
            const previewAvatar = document.getElementById('previewAvatar');
            previewAvatar.innerHTML = `
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
            `;
            previewAvatar.dataset.newPhoto = '';
            this.classList.add('hidden');
            document.getElementById('profilePhotoInput').value = '';
        });

        function renderSubjectStats(userTasks) {
            const subjectStats = document.getElementById('subjectStats');
            const subjects = {};
            
            userTasks.forEach(task => {
                if (!subjects[task.subject]) {
                    subjects[task.subject] = { total: 0, completed: 0 };
                }
                subjects[task.subject].total++;
                if (task.completed) {
                    subjects[task.subject].completed++;
                }
            });
            
            if (Object.keys(subjects).length === 0) {
                subjectStats.innerHTML = `
                    <div class="text-center py-8">
                        <div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center">
                            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                        </div>
                        <p class="text-gray-500 text-sm">Belum ada statistik mata pelajaran</p>
                    </div>
                `;
                return;
            }
            
            subjectStats.innerHTML = Object.entries(subjects).map(([subject, stats]) => {
                const percentage = stats.total > 0 ? Math.round((stats.completed / stats.total) * 100) : 0;
                return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium text-gray-800">${subject}</span>
                                <span class="text-xs text-gray-500">${stats.completed}/${stats.total}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                        <div class="ml-3 text-sm font-semibold text-gray-700">
                            ${percentage}%
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderRecentActivity(completedTasks) {
            const recentActivity = document.getElementById('recentActivity');
            const recentCompleted = completedTasks.slice(-5).reverse(); // Last 5 completed tasks
            
            if (recentCompleted.length === 0) {
                recentActivity.innerHTML = `
                    <div class="text-center py-8">
                        <div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center">
                            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <p class="text-gray-500 text-sm">Belum ada aktivitas terbaru</p>
                    </div>
                `;
                return;
            }
            
            recentActivity.innerHTML = recentCompleted.map(task => `
                <div class="flex items-center p-3 bg-green-50 rounded-lg border border-green-100">
                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-800">${task.title}</p>
                        <p class="text-xs text-gray-500">${task.subject} â€¢ ${new Date(task.date).toLocaleDateString('id-ID')}</p>
                    </div>
                    <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full">
                        Selesai
                    </span>
                </div>
            `).join('');
        }

        // Profile form submission
        profileForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newFullName = document.getElementById('editFullName').value.trim();
            const newUsername = document.getElementById('editUsername').value.trim();
            const newPassword = document.getElementById('editPassword').value;
            const confirmPassword = document.getElementById('editConfirmPassword').value;
            const previewAvatar = document.getElementById('previewAvatar');
            
            // Validate required fields
            if (!newFullName) {
                alert('Nama lengkap harus diisi!');
                return;
            }
            
            if (!newUsername) {
                alert('Username harus diisi!');
                return;
            }
            
            // Validate username uniqueness
            if (newUsername !== currentUser.username && users.some(u => u.username === newUsername)) {
                alert('Username sudah digunakan! Pilih username lain.');
                return;
            }
            
            // Validate password if provided
            if (newPassword) {
                if (newPassword.length < 6) {
                    alert('Password harus minimal 6 karakter!');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    alert('Password dan konfirmasi password tidak cocok!');
                    return;
                }
            }
            
            // Update user data
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            users[userIndex].fullName = newFullName;
            users[userIndex].username = newUsername;
            
            // Update profile photo
            if (previewAvatar.dataset.newPhoto !== undefined) {
                if (previewAvatar.dataset.newPhoto === '') {
                    users[userIndex].profilePhoto = null;
                } else {
                    users[userIndex].profilePhoto = previewAvatar.dataset.newPhoto;
                }
                delete previewAvatar.dataset.newPhoto;
            }
            
            if (newPassword) {
                users[userIndex].password = newPassword;
            }
            
            // Update current user reference
            currentUser.fullName = newFullName;
            currentUser.username = newUsername;
            currentUser.profilePhoto = users[userIndex].profilePhoto;
            if (newPassword) {
                currentUser.password = newPassword;
            }
            
            // Update UI
            const displayName = currentUser.fullName || currentUser.username;
            welcomeUser.textContent = `Selamat datang, ${displayName}`;
            const welcomeUserMobile = document.getElementById('welcomeUserMobile');
            if (welcomeUserMobile) {
                welcomeUserMobile.textContent = `Selamat datang, ${displayName}`;
            }
            
            // Update header avatar
            updateHeaderAvatar();
            
            // Clear password fields
            document.getElementById('editPassword').value = '';
            document.getElementById('editConfirmPassword').value = '';
            
            // Re-render profile
            renderProfile();
            renderUsers(); // Update users table if admin
            
            alert('Profil berhasil diperbarui!');
        });

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set minimum date to today for task date input
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('taskDate').setAttribute('min', today);
            
            // Initialize dark mode
            initDarkMode();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98a33008027b81c2',t:'MTc1OTczMzAzOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>